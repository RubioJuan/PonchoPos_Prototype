<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Productos</title>
    <link rel="stylesheet" th:href="@{/css/productos.css}">
    <script src="/js/productos.js" defer></script> <!-- Enlace al archivo JS -->
</head>
<body>
    <h1>Gestión de Productos</h1>

    <!-- Lista de productos -->
    <h2>Lista de Productos</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Cantidad</th>
                <th>Precio Costo</th>
                <th>IVA</th>
                <th>Precio Venta</th>
                <th>EAN</th>
                <th>Descripción</th>
                <th>Fecha de Ingreso</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="inventario : ${inventarios}">
                <td th:text="${inventario.id_producto}"></td>
                <td th:text="${inventario.nombre}"></td>
                <td th:text="${inventario.cantidad}"></td>
                <td th:text="${inventario.precio_costo}"></td>
                <td th:text="${inventario.iva}"></td>
                <td th:text="${inventario.precio_venta}"></td>
                <td th:text="${inventario.ean}"></td>
                <td th:text="${inventario.descripcion}"></td>
                <td th:text="${inventario.fecha_ingreso}"></td>
                <td>
                    <!-- Enlaces para editar y eliminar producto -->
                    <a th:href="@{/PonchoPos/inventario/editar/{id}(id=${inventario.id_producto})}" class="edit-btn">Editar</a> |
                    <a th:href="@{/PonchoPos/inventario/eliminar/{id}(id=${inventario.id_producto})}" class="delete-btn">Eliminar</a>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Formulario para agregar o editar producto -->
    <h2 th:text="${inventario.id_producto != null ? 'Editar Producto' : 'Agregar Producto'}"></h2>
    <form th:action="@{/PonchoPos/inventario}" th:object="${inventario}" method="post" id="inventarioForm">
        <input type="hidden" th:field="*{id_producto}" id="productoId" />

        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" th:field="*{nombre}" placeholder="Nombre" required><br>

        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" th:field="*{cantidad}" placeholder="Cantidad" required><br>

        <label for="precioCosto">Precio Costo:</label>
        <input type="number" step="0.01" id="precioCosto" th:field="*{precio_costo}" placeholder="Precio Costo" required><br>

        <label for="iva">IVA:</label>
        <input type="number" step="0.01" id="iva" th:field="*{iva}" placeholder="IVA" required><br>

        <label for="precioVenta">Precio Venta:</label>
        <input type="number" step="0.01" id="precioVenta" th:field="*{precio_venta}" placeholder="Precio Venta" required><br>

        <label for="ean">EAN:</label>
        <input type="text" id="ean" th:field="*{ean}" placeholder="EAN"><br>

        <label for="descripcion">Descripción:</label>
        <textarea id="descripcion" th:field="*{descripcion}" placeholder="Descripción"></textarea><br>

        <label for="fechaIngreso">Fecha de Ingreso:</label>
        <input type="date" id="fechaIngreso" th:field="*{fecha_ingreso}" required><br>

        <label for="idCategoria">ID Categoría:</label>
        <input type="number" id="idCategoria" th:field="*{id_categoria}" placeholder="ID Categoría" required><br>

        <button type="submit" th:text="${inventario.id_producto != null ? 'Guardar' : 'Actualizar'}"></button>
    </form>
</body>
</html>
